<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 609 483.107"><defs><style>.a,.k,.q,.x{fill:#95abf4;}.b,.d{fill:#020000;}.b{font-size:20px;}.b,.e,.s{font-family:Menlo-Regular, Menlo;}.c,.m,.o,.y{fill:#9dffa8;}.d,.e,.s{font-size:15px;}.d{font-family:Menlo-Italic, Menlo;font-style:italic;}.f,.g{fill:#fff;}.f,.j{stroke:#707070;}.g{stroke:#fff;}.h,.p,.s{fill:#fb9dff;}.i,.w{fill:#707070;}.j,.l,.n,.v{fill:none;}.l{stroke:#95abf4;}.n{stroke:#9dffa8;}.o,.p,.q{font-family:Menlo-Bold, Menlo;font-weight:700;}.r{fill:#10ebfd;}.t{fill:#000;}.u,.w,.x,.y{stroke:none;}</style></defs><g transform="translate(15 -11.893)"><path class="a" d="M0,0H40V40H0Z" transform="translate(-11 14)"/><text class="b" transform="translate(9 41)"><tspan x="-6.021" y="0">Q</tspan></text><rect class="c" width="40" height="40" transform="translate(-12 82)"/><text class="b" transform="translate(8 109)"><tspan x="-6.021" y="0">K</tspan></text><text class="d" transform="translate(9 69)"><tspan x="-22.577" y="0">q . d</tspan></text><text class="d" transform="translate(8 137)"><tspan x="-22.577" y="0">n . d</tspan></text><text class="e" transform="translate(329 114)"><tspan x="0" y="0">k2</tspan></text><text class="e" transform="translate(499 114)"><tspan x="0" y="0">q1</tspan></text><text class="e" transform="translate(49 39)"><tspan x="0" y="0">=</tspan></text><text class="e" transform="translate(48 107)"><tspan x="0" y="0">=</tspan></text><g class="f" transform="translate(75 14)"><rect class="u" width="49" height="40"/><rect class="v" x="0.5" y="0.5" width="48" height="39"/></g><g class="g" transform="translate(81 14)"><rect class="u" width="36" height="40"/><rect class="v" x="0.5" y="0.5" width="35" height="39"/></g><text class="e" transform="translate(90 30)"><tspan x="0" y="0">q1</tspan></text><text class="e" transform="translate(90 50)"><tspan x="0" y="0">q2</tspan></text><path class="h" d="M0,0H40V40H0Z" transform="translate(-13 153)"/><text class="b" transform="translate(7 180)"><tspan x="-6.021" y="0">V</tspan></text><text class="d" transform="translate(8 208)"><tspan x="-22.577" y="0">n . v</tspan></text><text class="e" transform="translate(48 175)"><tspan x="0" y="0">=</tspan></text><g class="f" transform="translate(74 142)"><rect class="u" width="49" height="55"/><rect class="v" x="0.5" y="0.5" width="48" height="54"/></g><g class="g" transform="translate(80 142)"><rect class="u" width="36" height="55"/><rect class="v" x="0.5" y="0.5" width="35" height="54"/></g><text class="e" transform="translate(89 155)"><tspan x="0" y="0">v1</tspan></text><text class="e" transform="translate(89 175)"><tspan x="0" y="0">v2</tspan></text><text class="e" transform="translate(89 193)"><tspan x="0" y="0">v3</tspan></text><g class="f" transform="translate(74 75)"><rect class="u" width="49" height="55"/><rect class="v" x="0.5" y="0.5" width="48" height="54"/></g><g class="g" transform="translate(80 75)"><rect class="u" width="36" height="55"/><rect class="v" x="0.5" y="0.5" width="35" height="54"/></g><text class="e" transform="translate(89 88)"><tspan x="0" y="0">k1</tspan></text><text class="e" transform="translate(89 108)"><tspan x="0" y="0">k2</tspan></text><text class="e" transform="translate(89 126)"><tspan x="0" y="0">k3</tspan></text><g class="i" transform="translate(417.5 11.893) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="w" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(339.449 12.521)"><line class="j" y2="161.409" transform="translate(78.051)"/></g><g class="i" transform="translate(579.537 173.893) rotate(135)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="w" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(578.909 95.842) rotate(90)"><line class="j" y2="161.409" transform="translate(78.051)"/></g><g class="i" transform="translate(325.467 251.003) rotate(-85)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="w" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="matrix(-0.643, -0.766, 0.766, -0.643, 376.117, 310.39)"><line class="j" y2="120.427" transform="translate(78.051)"/></g><g class="k" transform="translate(561.698 100.114) rotate(108)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="x" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="matrix(0.454, 0.891, -0.891, 0.454, 525.704, 30.855)"><line class="l" y2="161.409" transform="translate(78.051)"/></g><g class="k" transform="translate(362.826 323.05) rotate(-115)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="x" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="matrix(-0.94, -0.342, 0.342, -0.94, 436.384, 349.156)"><line class="l" y2="161.409" transform="translate(78.051)"/></g><g class="k" transform="translate(273.099 241.168) rotate(-70)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="x" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(306.653 311.641) rotate(-115)"><line class="l" y2="161.409" transform="translate(78.051)"/></g><g class="m" transform="translate(552.17 125.094) rotate(115)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="y" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(524.724 51.52) rotate(70)"><line class="n" y2="141.937" transform="translate(78.525)"/></g><g class="m" transform="translate(327.36 65.898) rotate(5)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="y" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(267.61 116.853) rotate(-40)"><line class="n" y2="141.937" transform="translate(78.525)"/></g><text class="e" transform="translate(525 151)"><tspan x="0" y="0">k1</tspan></text><text class="e" transform="translate(288 217)"><tspan x="0" y="0">q2</tspan></text><text class="e" transform="translate(382 299)"><tspan x="0" y="0">q3</tspan></text><text class="e" transform="translate(-15 365)"><tspan x="0" y="0">1. Each key </tspan><tspan class="o" y="0">K</tspan><tspan y="0">_i maps to a value </tspan><tspan class="p" y="0">V</tspan><tspan y="0">_i.</tspan><tspan x="0" y="18">2. Each query </tspan><tspan class="q" y="18">Q</tspan><tspan y="18">_j will operate on all the keys</tspan><tspan x="0" y="36" xml:space="preserve">   with a compatibility function (dot product).</tspan><tspan x="0" y="54">3. These scores will be transformed into a </tspan><tspan x="0" y="72" xml:space="preserve">   probability distribution by a </tspan><tspan class="r" y="72">softmax</tspan><tspan y="72">.</tspan><tspan x="0" y="90">3. Then, each query will be mapped to a linear </tspan><tspan x="0" y="108" xml:space="preserve">   combination of the values as determined by</tspan><tspan x="0" y="126" xml:space="preserve">   the probability distribution, e.g:</tspan></text><g class="f" transform="translate(440 385)"><rect class="u" width="154" height="76"/><rect class="v" x="0.5" y="0.5" width="153" height="75"/></g><g class="g" transform="translate(448 385)"><rect class="u" width="139" height="76"/><rect class="v" x="0.5" y="0.5" width="138" height="75"/></g><text class="s" transform="translate(448 410)"><tspan class="r" x="0" y="0">0.8</tspan><tspan class="t" y="0"> </tspan><tspan class="h" y="0">v1</tspan><tspan class="t" y="0" xml:space="preserve"> + </tspan><tspan class="r" y="0">0.1</tspan><tspan class="t" y="0"> </tspan><tspan class="h" y="0">v2</tspan><tspan class="r" x="0" y="18">0.3</tspan><tspan class="t" y="18"> </tspan><tspan class="h" y="18">v1</tspan><tspan class="t" y="18" xml:space="preserve"> + </tspan><tspan class="r" y="18">0.7</tspan><tspan class="t" y="18"> </tspan><tspan class="h" y="18">v2</tspan><tspan class="r" x="0" y="36">0.4</tspan><tspan class="t" y="36"> </tspan><tspan class="h" y="36">v2</tspan><tspan class="t" y="36" xml:space="preserve"> + </tspan><tspan class="r" y="36">0.6</tspan><tspan class="t" y="36"> </tspan><tspan class="h" y="36">v2</tspan></text></g></svg>