<div id="target">
</div>
<style>
circle:hover {
  stroke-width: 2px;
}
</style>

<script src="https://d3js.org/d3.v4.js"></script>
<script>

const animate = function(images, file_names) {
  const buttons = d3.select('#target')
    .append("svg")
    .attr("width", 700)
    .attr("height", 100);
  
  const canvas = d3.select('#target')
    .append("svg")
    .attr("width", 700)
    .attr("height", 500);

  const show = (i) => {
    const img = images[file_names[i]];
    canvas.selectAll('svg').remove();
    canvas.node().appendChild(img);
  }

  buttons.selectAll("circle")
    .data([0,1,2,3])
    .enter()
    .append('circle')
    .attr('r', 15)
    .attr('stroke', 'grey')
    .attr('fill', 'white')
    .attr('cx', d => { console.log(d); return d*70 + 65; } )
    .attr('cy', 75)
    .on("mouseover", d => show(d));
}

const getImage = function(file_path, saveImage) {
  d3.xml(file_path).mimeType("image/svg+xml").get((error, xml) => {
    if (error) throw error;
    const svg = xml.documentElement;
    svg.setAttribute("height", "400px");
    svg.setAttribute("preserveAspectRatio", "xMinYMin meet");
    svg.id = file_path;
    saveImage(file_path, svg);
  });
}

const getImages = function(file_names) {
  let images = {};
  const saveImage = (file_path, img) => {
    images[file_path] = img;
    if (Object.keys(images).length >= file_names.length) {
      animate(images, file_names);
    }
  }
  file_names.forEach(name => getImage(name, saveImage));
  return images;
}

const file_names = [
  '_static/images/002/beam-search-graph-01.svg',
  '_static/images/002/beam-search-graph-02.svg',
  '_static/images/002/beam-search-graph-03.svg',
  '_static/images/002/beam-search-graph-04.svg',
  '_static/images/002/beam-search-graph-05.svg'
];
getImages(file_names);
</script>
