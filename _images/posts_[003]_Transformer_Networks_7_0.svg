<svg viewBox="0 0 601 483.107" xmlns="http://www.w3.org/2000/svg"><defs><style>.a,.q{fill:#fd9910;}.b,.d{fill:#020000;}.b{font-size:20px;}.b,.e,.s{font-family:Menlo-Regular, Menlo;}.c{fill:rgba(255,47,47,0.5);}.d,.e,.s{font-size:15px;}.d{font-family:Menlo-Italic, Menlo;font-style:italic;}.f,.g{fill:#fff;}.f,.j{stroke:#707070;}.g{stroke:#fff;}.h,.m,.p,.s,.y{fill:#95abf4;}.i,.w{fill:#707070;}.j,.l,.n,.v{fill:none;}.k,.x{fill:#fc9810;}.l{stroke:#fc9810;}.n{stroke:#95abf4;}.o{fill:#ff9696;}.o,.p,.q{font-family:Menlo-Bold, Menlo;font-weight:700;}.r{fill:#2ac141;}.t{fill:#000;}.u,.w,.x,.y{stroke:none;}</style></defs><g transform="translate(-40 -47.893)"><rect class="a" height="40" transform="translate(44 50)" width="40"/><text class="b" transform="translate(64 77)"><tspan x="-6.021" y="0">Q</tspan></text><rect class="c" height="40" transform="translate(43 118)" width="40"/><text class="b" transform="translate(63 145)"><tspan x="-6.021" y="0">K</tspan></text><text class="d" transform="translate(64 105)"><tspan x="-22.577" y="0">q . d</tspan></text><text class="d" transform="translate(63 173)"><tspan x="-22.577" y="0">n . d</tspan></text><text class="e" transform="translate(384 150)"><tspan x="0" y="0">k2</tspan></text><text class="e" transform="translate(554 150)"><tspan x="0" y="0">q1</tspan></text><text class="e" transform="translate(104 75)"><tspan x="0" y="0">=</tspan></text><text class="e" transform="translate(103 143)"><tspan x="0" y="0">=</tspan></text><g class="f" transform="translate(130 50)"><rect class="u" height="40" width="49"/><rect class="v" height="39" width="48" x="0.5" y="0.5"/></g><g class="g" transform="translate(136 50)"><rect class="u" height="40" width="36"/><rect class="v" height="39" width="35" x="0.5" y="0.5"/></g><text class="e" transform="translate(145 66)"><tspan x="0" y="0">q1</tspan></text><text class="e" transform="translate(145 86)"><tspan x="0" y="0">q2</tspan></text><rect class="h" height="40" transform="translate(42 189)" width="40"/><text class="b" transform="translate(62 216)"><tspan x="-6.021" y="0">V</tspan></text><text class="d" transform="translate(63 244)"><tspan x="-22.577" y="0">n . v</tspan></text><text class="e" transform="translate(103 211)"><tspan x="0" y="0">=</tspan></text><g class="f" transform="translate(129 178)"><rect class="u" height="55" width="49"/><rect class="v" height="54" width="48" x="0.5" y="0.5"/></g><g class="g" transform="translate(135 178)"><rect class="u" height="55" width="36"/><rect class="v" height="54" width="35" x="0.5" y="0.5"/></g><text class="e" transform="translate(144 191)"><tspan x="0" y="0">v1</tspan></text><text class="e" transform="translate(144 211)"><tspan x="0" y="0">v2</tspan></text><text class="e" transform="translate(144 229)"><tspan x="0" y="0">v3</tspan></text><g class="f" transform="translate(129 111)"><rect class="u" height="55" width="49"/><rect class="v" height="54" width="48" x="0.5" y="0.5"/></g><g class="g" transform="translate(135 111)"><rect class="u" height="55" width="36"/><rect class="v" height="54" width="35" x="0.5" y="0.5"/></g><text class="e" transform="translate(144 124)"><tspan x="0" y="0">k1</tspan></text><text class="e" transform="translate(144 144)"><tspan x="0" y="0">k2</tspan></text><text class="e" transform="translate(144 162)"><tspan x="0" y="0">k3</tspan></text><g transform="translate(155 287)"><g class="i" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="w" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(239.449 -238.479)"><line class="j" transform="translate(78.051)" y2="161.409"/></g></g><g transform="translate(395.43 -107.607) rotate(90)"><g class="i" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="w" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(239.449 -238.479)"><line class="j" transform="translate(78.051)" y2="161.409"/></g></g><g transform="matrix(-0.643, -0.766, 0.766, -0.643, 767.718, 376.527)"><g class="i" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="w" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(239.449 -238.479)"><line class="j" transform="translate(78.051)" y2="120.427"/></g></g><g transform="matrix(0.454, 0.891, -0.891, 0.454, 259.51, -38.229)"><g class="k" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="x" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(239.449 -238.479)"><line class="l" transform="translate(78.051)" y2="161.409"/></g></g><g transform="matrix(0.454, 0.891, -0.891, 0.454, 259.51, -38.229)"><g class="k" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="x" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(239.449 -238.479)"><line class="l" transform="translate(78.051)" y2="161.409"/></g></g><g transform="matrix(-0.94, -0.342, 0.342, -0.94, 797.958, 242.955)"><g class="k" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="x" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(239.449 -238.479)"><line class="l" transform="translate(78.051)" y2="161.409"/></g></g><g transform="translate(678.984 463.87) rotate(-115)"><g class="k" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="x" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(239.449 -238.479)"><line class="l" transform="translate(78.051)" y2="161.409"/></g></g><g transform="translate(273.892 -55.479) rotate(70)"><g class="m" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="y" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(238.975 -238.479)"><line class="n" transform="translate(78.525)" y2="141.937"/></g></g><g transform="translate(292.836 489.149) rotate(-40)"><g class="m" transform="translate(317.5 -239.107) rotate(45)"><path class="u" d="M 4.48930025100708 10.31504917144775 L 0.8653011322021484 0.8604671359062195 L 10.36387062072754 4.440470218658447 L 7.402174472808838 7.402174949645996 L 4.48930025100708 10.31504917144775 Z"/><path class="y" d="M 1.730582237243652 1.720914840698242 L 4.680450439453125 9.416769027709961 L 7.048614501953125 7.048604965209961 L 9.462241172790527 4.6349778175354 L 1.730582237243652 1.720914840698242 M 4.76837158203125e-06 -4.76837158203125e-06 L 11.26548385620117 4.245954990386963 L 7.755724430084229 7.755715370178223 L 4.298134326934814 11.21330547332764 L 4.76837158203125e-06 -4.76837158203125e-06 Z"/></g><g transform="translate(238.975 -238.479)"><line class="n" transform="translate(78.525)" y2="141.937"/></g></g><text class="e" transform="translate(580 187)"><tspan x="0" y="0">k1</tspan></text><text class="e" transform="translate(343 253)"><tspan x="0" y="0">q2</tspan></text><text class="e" transform="translate(437 335)"><tspan x="0" y="0">q3</tspan></text><text class="e" transform="translate(40 401)"><tspan x="0" y="0">1. Each key </tspan><tspan class="o" y="0">K</tspan><tspan y="0">_i maps to a value </tspan><tspan class="p" y="0">V</tspan><tspan y="0">_i.</tspan><tspan x="0" y="18">2. Each query </tspan><tspan class="q" y="18">Q</tspan><tspan y="18">_j will operate on all the keys</tspan><tspan x="0" xml:space="preserve" y="36">   with a compatibility function (dot product).</tspan><tspan x="0" y="54">3. These scores will be transformed into a </tspan><tspan x="0" xml:space="preserve" y="72">   probability distribution by a </tspan><tspan class="r" y="72">softmax</tspan><tspan y="72">.</tspan><tspan x="0" y="90">3. Then, each query will be mapped to a linear </tspan><tspan x="0" xml:space="preserve" y="108">   combination of the values as determined by</tspan><tspan x="0" xml:space="preserve" y="126">   the probability distribution, e.g:</tspan></text><g class="f" transform="translate(487 411)"><rect class="u" height="76" width="154"/><rect class="v" height="75" width="153" x="0.5" y="0.5"/></g><g class="g" transform="translate(495 411)"><rect class="u" height="76" width="139"/><rect class="v" height="75" width="138" x="0.5" y="0.5"/></g><text class="s" transform="translate(495 436)"><tspan class="r" x="0" y="0">0.8</tspan><tspan class="t" y="0"> </tspan><tspan class="h" y="0">v1</tspan><tspan class="t" xml:space="preserve" y="0"> + </tspan><tspan class="r" y="0">0.1</tspan><tspan class="t" y="0"> </tspan><tspan class="h" y="0">v2</tspan><tspan class="r" x="0" y="18">0.3</tspan><tspan class="t" y="18"> </tspan><tspan class="h" y="18">v1</tspan><tspan class="t" xml:space="preserve" y="18"> + </tspan><tspan class="r" y="18">0.7</tspan><tspan class="t" y="18"> </tspan><tspan class="h" y="18">v2</tspan><tspan class="r" x="0" y="36">0.4</tspan><tspan class="t" y="36"> </tspan><tspan class="h" y="36">v2</tspan><tspan class="t" xml:space="preserve" y="36"> + </tspan><tspan class="r" y="36">0.6</tspan><tspan class="t" y="36"> </tspan><tspan class="h" y="36">v2</tspan></text></g></svg>